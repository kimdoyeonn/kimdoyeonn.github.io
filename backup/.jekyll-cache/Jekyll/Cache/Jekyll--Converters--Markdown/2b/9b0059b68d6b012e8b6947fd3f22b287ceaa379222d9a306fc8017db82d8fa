I"¶5<p>ìƒˆë¡œê³ ì¹¨í–ˆì„ ë•Œ ì €ì¥ëœ ë¦¬ìŠ¤íŠ¸, ì²´í¬ì—¬ë¶€ë¥¼ ìœ ì§€í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">localStrage</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ì•˜ë‹¤.</p>

<p><code class="language-plaintext highlighter-rouge">localStrage</code>ëŠ” <code class="language-plaintext highlighter-rouge">window.localStrage</code>ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆê³  windowë¥¼ ìƒëµí•˜ê³  <code class="language-plaintext highlighter-rouge">localStrage</code>ë¡œ ì‚¬ìš©í•˜ëŠ” ê²ƒë„ ê°€ëŠ¥í•˜ë‹¤.</p>

<h4 id="ë¦¬ìŠ¤íŠ¸-ìœ ì§€í•˜ê¸°">ë¦¬ìŠ¤íŠ¸ ìœ ì§€í•˜ê¸°</h4>

<p><strong>template ìˆ˜ì •</strong></p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- js í…œí”Œë¦¿ --&gt;</span>
<span class="nt">&lt;script </span><span class="na">id=</span><span class="s">"template-list-item"</span> <span class="na">type=</span><span class="s">"text/template"</span><span class="nt">&gt;</span>
	<span class="o">&lt;</span><span class="nx">li</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">todo_content</span><span class="dl">"</span><span class="o">&gt;</span>
        <span class="o">&lt;</span><span class="nx">input</span> <span class="nx">type</span><span class="o">=</span><span class="dl">"</span><span class="s2">checkbox</span><span class="dl">"</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">statement</span><span class="dl">"</span> <span class="p">{</span><span class="nx">checked</span><span class="p">}</span><span class="o">&gt;&lt;</span><span class="nx">span</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">displayed_todo {class}</span><span class="dl">"</span><span class="o">&gt;</span><span class="p">{</span><span class="nx">content</span><span class="p">}</span><span class="o">&lt;</span><span class="sr">/span</span><span class="err">&gt;
</span>        <span class="o">&lt;</span><span class="nx">svg</span> <span class="nx">xmlns</span><span class="o">=</span><span class="dl">"</span><span class="s2">http://www.w3.org/2000/svg</span><span class="dl">"</span> <span class="nx">width</span><span class="o">=</span><span class="dl">"</span><span class="s2">16</span><span class="dl">"</span> <span class="nx">height</span><span class="o">=</span><span class="dl">"</span><span class="s2">16</span><span class="dl">"</span> <span class="nx">fill</span><span class="o">=</span><span class="dl">"</span><span class="s2">currentColor</span><span class="dl">"</span> <span class="kd">class</span><span class="o">=</span><span class="dl">"</span><span class="s2">bi bi-x</span><span class="dl">"</span> <span class="nx">viewBox</span><span class="o">=</span><span class="dl">"</span><span class="s2">0 0 16 16</span><span class="dl">"</span><span class="o">&gt;</span>
        	<span class="o">&lt;</span><span class="nx">path</span> <span class="nx">fill</span><span class="o">-</span><span class="nx">rule</span><span class="o">=</span><span class="dl">"</span><span class="s2">evenodd</span><span class="dl">"</span> <span class="nx">d</span><span class="o">=</span><span class="dl">"</span><span class="s2">M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z</span><span class="dl">"</span><span class="o">/&gt;</span>
        <span class="o">&lt;</span><span class="sr">/svg</span><span class="err">&gt;
</span>    <span class="o">&lt;</span><span class="sr">/li</span><span class="err">&gt;
</span><span class="nt">&lt;/script&gt;</span>
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">{checked}</code>: checkboxì— ì²´í¬ë¥¼ ë“±ë¡í•´ì£¼ê¸° ìœ„í•´</li>
  <li><code class="language-plaintext highlighter-rouge">{class}</code>: ì·¨ì†Œì„ ì˜ ì—¬ë¶€</li>
  <li><code class="language-plaintext highlighter-rouge">{content}</code>: íˆ¬ë‘ë¦¬ìŠ¤íŠ¸ì˜ ë‚´ìš©</li>
</ul>

<p><strong>ì €ì¥í•˜ê¸°</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">savedList</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">toDoList</span><span class="dl">"</span><span class="p">))</span>

<span class="c1">// ì—”í„°ë¡œ ë“±ë¡í–ˆì„ ë•Œ í™”ë©´ì— ë³´ì´ëŠ” ë™ì‹œì— localStrageì— ì €ì¥í•´ì¤Œ</span>
<span class="nx">savedList</span><span class="p">[</span><span class="nx">todo</span><span class="p">]</span> <span class="o">=</span> <span class="dl">""</span>	<span class="c1">// ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ë¥¼ dictionaryì— ë‹´ì•„ì¤Œ</span>
<span class="nb">window</span><span class="p">.</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">toDoList</span><span class="dl">"</span><span class="p">,</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">savedList</span><span class="p">))</span>	<span class="c1">// ì—…ë°ì´íŠ¸ëœ dictionaryë¥¼ localStrageì— ìƒˆë¡œ ì €ì¥í•´ì¤Œ</span>
</code></pre></div></div>

<p>ì €ì¥ë˜ì–´ìˆëŠ” ë¦¬ìŠ¤íŠ¸ë¥¼ <code class="language-plaintext highlighter-rouge">localStrage.getItem()</code>ì„ ì‚¬ìš©í•´ì„œ ë¶ˆëŸ¬ì˜¨ë‹¤. ì €ì¥í•  ë•Œ <code class="language-plaintext highlighter-rouge">localStrage.setItem()</code>ë§Œ í•´ì£¼ì—ˆì„ ë•ŒëŠ” ë¬¸ìì—´ í˜•ì‹ìœ¼ë¡œë§Œ ì €ì¥ëœë‹¤. ë•Œë¬¸ì— ì €ì¥í•  ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">JSON.stringify()</code> ë©”ì„œë“œë¥¼ ì‚¬ìš©í•´ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ JSON ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ì €ì¥í•˜ê³ , ë¶ˆëŸ¬ì˜¬ ë•ŒëŠ” <code class="language-plaintext highlighter-rouge">JSON.parse()</code> ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¡œ ë°”ê¾¸ì–´ì„œ ë¶ˆëŸ¬ì™”ë‹¤.</p>

<p><strong>ë¶ˆëŸ¬ì˜¤ê¸°</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="nx">savedList</span><span class="p">){</span>
    <span class="kd">let</span> <span class="nx">template</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">#template-list-item</span><span class="dl">"</span><span class="p">).</span><span class="nx">innerHTML</span>
    <span class="k">for</span><span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">savedList</span><span class="p">){</span>
        <span class="nx">displayed_temp</span> <span class="o">=</span> <span class="nx">template</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">{content}</span><span class="dl">"</span><span class="p">,</span> <span class="nx">key</span><span class="p">).</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">{checked}</span><span class="dl">"</span><span class="p">,</span> <span class="nx">savedList</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">savedList</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">checked</span><span class="dl">"</span><span class="p">){</span>
            <span class="nx">displayed_temp</span> <span class="o">=</span> <span class="nx">displayed_temp</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">{class}</span><span class="dl">"</span><span class="p">,</span><span class="dl">"</span><span class="s2">strike</span><span class="dl">"</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nx">ul</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">+=</span> <span class="nx">displayed_temp</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë¦¬ìŠ¤íŠ¸ì˜ dictionaryê°€ ë¹„ì–´ìˆì§€ ì•Šë‹¤ë©´, templateì— dictionaryë¥¼ ëŒ€ì…í•´ì„œ í™”ë©´ì— ë³´ì—¬ì¤Œ</p>

<p><strong>ì‚­ì œ</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">deleteitem</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">let</span> <span class="nx">li</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">;</span>
    <span class="nx">ul</span><span class="p">.</span><span class="nx">removeChild</span><span class="p">(</span><span class="nx">li</span><span class="p">);</span>

    <span class="c1">// 2020-12-16 localStrageì—ì„œ ì‚­ì œ</span>
    <span class="k">delete</span> <span class="nx">savedList</span><span class="p">[</span><span class="nx">li</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">trim</span><span class="p">()]</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">toDoList</span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">savedList</span><span class="p">))</span>
<span class="p">}</span>  
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">&lt;li&gt;</code>ì—ì„œ ì‚­ì œí•  ë•Œ <code class="language-plaintext highlighter-rouge">localStrage</code>ì—ì„œ ê°™ì´ ì‚­ì œ í•´ì¤Œ</p>

<p><strong>ì§„í–‰ìƒíƒœ(ì™„ë£Œ, ì§„í–‰ì¤‘)</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">check_todo</span><span class="p">(){</span>
    <span class="kd">let</span> <span class="nx">displayed_todo</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">parentNode</span>
    <span class="k">if</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">checked</span><span class="p">){</span>
        <span class="nx">displayed_todo</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">strike</span><span class="dl">"</span><span class="p">)</span>
        <span class="nx">displayed_todo</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="dl">"</span><span class="s2">.statement</span><span class="dl">"</span><span class="p">).</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">checked</span><span class="dl">"</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>
        <span class="nx">savedList</span><span class="p">[</span><span class="nx">displayed_todo</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">trim</span><span class="p">()]</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">checked</span><span class="dl">"</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="nx">displayed_todo</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">strike</span><span class="dl">"</span><span class="p">)</span>
        <span class="nx">savedList</span><span class="p">[</span><span class="nx">displayed_todo</span><span class="p">.</span><span class="nx">innerText</span><span class="p">.</span><span class="nx">trim</span><span class="p">()]</span> <span class="o">=</span> <span class="dl">""</span>
    <span class="p">}</span>
    <span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="dl">"</span><span class="s2">toDoList</span><span class="dl">"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">savedList</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ì²´í¬ë°•ìŠ¤ê°€ ëˆŒë ¸ì„ ë•Œ ì²´í¬ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê³  ì·¨ì†Œì„ ì„ ê·¸ì–´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤. ìƒˆë¡œê³ ì¹¨ í›„ì— ì €ì¥ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ì™„ë£Œ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì—¬ ìƒˆë¡œ ë¶ˆëŸ¬ì˜¨ ë¦¬ìŠ¤íŠ¸ì—ë„ ì·¨ì†Œì„ ì„ ê·¸ì–´ì¤„ ìˆ˜ ìˆë„ë¡ ë§Œë“¤ì—ˆë‹¤. keyë¥¼ ë¦¬ìŠ¤íŠ¸ë‚´ìš©ìœ¼ë¡œ í•˜ê³  ì™„ë£Œ ì—¬ë¶€ë¥¼ valueë¡œ ê°€ì§€ê²Œ í–ˆê³  ì™„ë£Œë˜ì—ˆì„ ê²½ìš° â€œcheckedâ€ë¥¼, ì§„í–‰ì¤‘ì¼ ê²½ìš° â€œâ€œë¥¼ valueë¡œ ë„£ì–´ì£¼ì—ˆë‹¤.</p>

<p>ë§ˆì°¬ê°€ì§€ë¡œ dictionaryê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆê¸° ë•Œë¬¸ì— localStrageì— ìƒˆë¡œ ê°’ì„ ì €ì¥í•´ì£¼ì—ˆë‹¤.</p>

:ET