---
title: 물리 계층과 데이터링크 계층
date: '2024-10-25'
tags: ['network']
draft: false
---

## 이더넷

Ethernet

유선 LAN 환경에서 가장 대중적으로 사용되는 기술

다양한 통신 매체의 규격들과 송수신되는 프레임의 형태, 프레임을 주고받는 방법 등이 정의된 네트워크 기술

IEEE 802.3

- 이더넷 관련 표준 규격들의 집합
- 이더넷 표준에 따라 지원되는 통신 매체의 종류와 전송 속도가 달라질 수 있음

이더넷 프레임

- 프리엠블, 수신지 MAC 주소, 송신지 MAC 주소, 타입/길이, 데이터, FCS로 구성

MAC 주소

- 네트워크 인터페이스마다 부여되는 물리적 주소

## NIC와 케이블

### NIC

Network Interface Controller

- 호스트와 통신 매체를 연결하고, MAC 주소가 부여되는 네트워크 장비
- 호스트뿐만 아니라 네트워크 장비에도 연결될 수 있음

통신 매체에는 전기나 빛 등의 신호가 흐르는데 이를 호스트가 이해하려면 이 신호를 정보로 변환하는 절차가 필요합니다. 이런 변환을 담당하는 장치가 NIC입니다.

### 케이블

### 트위스티드 페어 케이블

구리선을 통해 전기 신호를 주고 받는 유선 통신매체

구리선은 간섭으로 인해 신호가 왜곡될 수 있기 때문에 브레이드 실드 또는 포일 실드로 감싸 노이즈로부터 구리선을 보호합니다.

### 광섬유 케이블

광섬유를 통해 광신호를 주고 받는 유선 통신 매체

코어의 지름에 따라 통과할 수 있는 경로의 개수가 달라지기 때문에 싱글모드, 멀티 모드로 나뉩니다.

멀티모드는 단파장을 사용하고 싱글모드에 비해 저렴하지만 멀리 이동하면 신호의 유실이 생길 수 있기 때문에 근거리에 사용합니다.

싱글모드는 장파장을 사용하고 멀티모드에 비해 비싸지만 신호 손실이 적어 멀리 이동할 수 있기 때문에 대륙을 연결하는 해양 케이블에 사용합니다.

## 주소 개념이 없는 물리 계층

통신 매체를 통해 송수신되는 메시지는 다른 호스트에게 전달되는 과정에서 네트워크 장비를 거칠 수 있다.

물리 계층에는 주소 개념이 없기 때문에 물리 계층의 네트워크 장비는 송수신 되는 정보에 대한 어떤 조작이나 판단을 하지 않는다. 반면 데이터 링크 계층에는 주소 개념이 있기 때문에(ex. MAC 주소) 데이터 링크 계층 이상의 장비들은 송수신지를 특정할 수 있고, 주소를 바탕으로 송수신되는 정보에 대한 조작과 판단을 할 수 있다.

## 허브

허브는 물리 계층에서 여러 개의 호스트를 연결하는 장치

### 허브의 특징

1. 전달받은 신호를 다른 모든 포트로 그대로 내보낸다.
2. 반이중 모드로 통신한다.

### 콜리전 도메인

전달받은 신호를 그대로 다른 모든 포트에 내보낼 때 여러 호스트가 우연히 동시에 허브에 신호를 송신하면 충돌이 발생하게 된다. 이 때 충돌이 발생할 수 있는 영역을 콜리전 도메인이라고 한다.

CSMA/CD

Carrier Sense Multiple Access with Collision Detection의 약자

반이중 이더넷 네트워크에서 충돌을 방지하는 대표적인 프로토콜로, 이더넷을 대표하는 송수신방법이다.

콜리전 도메인으로 인한 충돌 문제를 해결하려면 CSMA/CD 프로토콜을 사용하거나 스위치 장치를 사용해야함

허브에서 충돌이 발생하는 이유는 허브가 반이중모드로 통신하기 때문이다. 두 호스트가 동시에 허브에 신호를 송신하면 허브에서 충돌이 발생한다.

- Carrier Sense
  캐리어 감지 - 메시지를 보내기 전에 현재 네트워크 상에서 전송중인 것이 있는지 확인
- Multiple Access
  다중 접근 - 캐리어 감지를 하는 데도 두 개 이상의 호스트가 동시에 네트워크를 사용하려고 하는 경우
- Collision Detection
  충돌 검출 - 충돌을 감지하면 전송이 중단되고, 충돌을 검출한 호스트는 다른 이들에게 충돌이 발생했음을 알리고자 잼신호를 보낸다. 그리고 임의의 시간 동안 기다린 후 다시 전송

## 스위치

허브는 주소 개념이 없는 물리 계층의 장비이기 때문에 전달 받은 신호를 다른 포트로 내보내기만 한다. 그리고 반이중 통신을 하기 때문에 허브에 연결된 모든 호스트가 콜리전 도메인에 속하게 된다.

CSMA/CD를 통해 충돌 문제를 어느정도는 완화할 수 있지만, 근본적으로 이 문제를 해결하려면 전달받은 신호를 수신지 호스트가 연결된 포트로만 내보내면 된다. 그럼 포트별로 콜리전 도메인이 나눠지기 때문에 충돌이 발생할 확률이 줄어들게 되고, CSMA/CD를 사용할 필요도 없어진다. 이런 기능을 지원하는 장치가 데이터 링크 계층의 스위치 이다.

포트별로 콜리전 도메인을 나누며 전이중 모드 통신을 지원하는 데이터 링크 계층의 장비

MAC 주소 테이블로 MAC 주소를 학습해 원하는 포트로 패킷을 포워딩하고 원치 않는 포트를 필터링 할 수 있음

### MAC 주소 학습

1. 플러딩

   처음엔 스위치도 어느 포트에 어느 MAC 주소가 연결되어 있는지 모르기 때문에 처음 신호가 수신되었을 때 허브처럼 송신지를 제외한 모든 포트로 프레임을 전달한다. 이 동작을 플러딩이라고 한다. 그리고 응답 프레임이 돌아오면 이 응답 프레임을 통해 포트와 수신지의 MAC 주소를 알아내서 MAC 주소 테이블에 기록한다.

2. 포워딩, 필터링

   전달받은 프레임을 어디로 내보내고, 어디로 내보내지 않을지 결정하는 스위치의 기능을 필터링이라고 하고, 실제로 프레임이 전송될 포트에 프레임을 전송하는 것을 포워딩이라고 한다.

3. 에이징

   MAC 주소 테이블에 등록된 특정 포트에서 일정 시간 동안 프레임을 전송받지 못했다면 해당 항목을 삭제하는데, 이를 에이징이라고 한다.

### VLAN

- 스위치로 만들 수 있는 가상의 LAN
- 포트 기반 VLAN과 MAC 기반 VLAN이 있음
  어느 VLAN에 속하는지가 어느 포트에 연결되었냐에 따라 결정되는 방식이 포트 기반 VLAN, MAC 주소에 따라 어느 VLAN에 속하는지가 결정되는 것을 MAC 기반 VLAN이라고 한다.
