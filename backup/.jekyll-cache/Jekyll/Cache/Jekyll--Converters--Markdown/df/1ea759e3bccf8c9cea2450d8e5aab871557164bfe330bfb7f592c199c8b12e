I"´A<ul>
  <li>
    <p>ì°¸ê³ : <a href="https://tutorial.djangogirls.org/ko/django_forms/">ì¥ê³ ê±¸ìŠ¤</a></p>
  </li>
  <li>
    <p>ê´€ë¦¬ì ê¸°ëŠ¥ì„ ê±°ì¹˜ì§€ ì•Šê³  ë°”ë¡œ ê¸€ì„ ì¶”ê°€í•˜ê±°ë‚˜ ìˆ˜ì •í•˜ëŠ” ê¸°ëŠ¥ ì¶”ê°€ (<code class="language-plaintext highlighter-rouge">form</code>)</p>
  </li>
  <li>
    <p>ì¥ê³ ëŠ” ì•„ë¬´ëŸ° ì¤€ë¹„ ì—†ì´ë„ <code class="language-plaintext highlighter-rouge">form</code>ì„ ë§Œë“¤ ìˆ˜ ìˆê³ , <code class="language-plaintext highlighter-rouge">ModelForm</code>ì„ ìƒì„±í•´ ìë™ì„ ëª¨ë¸ì— ê²°ê³¼ë¬¼ì„ ì €ì¥í•  ìˆ˜ ìˆë‹¤.</p>
  </li>
  <li>
    <p>í¼ì„ ë§Œë“¤ì–´ì„œ <code class="language-plaintext highlighter-rouge">Post</code>ëª¨ë¸ì— ì ìš©í•´ë³´ê¸°</p>

    <ol>
      <li>
        <p>í¼ë§Œì˜ <code class="language-plaintext highlighter-rouge">forms.py</code>ìƒì„±</p>

        <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>blog
 â””â”€â”€ forms.py
</code></pre></div>        </div>

        <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">forms</span>
     
<span class="kn">from</span> <span class="nn">.models</span> <span class="kn">import</span> <span class="n">Post</span>
     
<span class="k">class</span> <span class="nc">PostForm</span><span class="p">(</span><span class="n">forms</span><span class="p">.</span><span class="n">ModelForm</span><span class="p">):</span>
     
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">Post</span>
        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span><span class="s">'title'</span><span class="p">,</span> <span class="s">'text'</span><span class="p">,)</span>
</code></pre></div>        </div>

        <ul>
          <li>forms modelì„ importí•˜ê³  <code class="language-plaintext highlighter-rouge">Post</code> modelë„ importí•¨</li>
          <li><code class="language-plaintext highlighter-rouge">PostForm</code> - í¼ì˜ ì´ë¦„</li>
          <li><code class="language-plaintext highlighter-rouge">forms.ModelForm</code> - ì¥ê³ ì— ì´ í¼ì´ <code class="language-plaintext highlighter-rouge">ModelForm</code>ì¸ ê²ƒì„ ì•Œë ¤ì¤Œ</li>
          <li><code class="language-plaintext highlighter-rouge">class Meta</code> - ì´ í¼ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œ ì–´ë–¤ modelì´ ì“°ì—¬ì•¼ í•˜ëŠ”ì§€ ì¥ê³ ì— ì•Œë ¤ì¤Œ (<code class="language-plaintext highlighter-rouge">model = post</code>)</li>
          <li><code class="language-plaintext highlighter-rouge">fields = ('title','text',)</code> - í¼ì— í•„ë“œë¥¼ ë„£ì–´ì¤Œ, <code class="language-plaintext highlighter-rouge">title</code>, <code class="language-plaintext highlighter-rouge">text</code>ë§Œ ë³´ì—¬ì§€ê²Œ ë¨ <code class="language-plaintext highlighter-rouge">author</code>ëŠ” í˜„ì¬ ë¡œê·¸ì¸ í•˜ê³  ìˆëŠ” ì‚¬ëŒì´ ë  ê²ƒì´ê³ , <code class="language-plaintext highlighter-rouge">created_date</code>ëŠ” ê¸€ì´ ë“±ë¡ë˜ëŠ” ì‹œê°„ì´ ë  ê²ƒì´ë‹¤.</li>
        </ul>

        <p>ì´ì œ ë·°ì—ì„œ ì´ í¼ì„ ì‚¬ìš©í•´ í…œí”Œë¦¿ì— ë³´ì—¬ì£¼ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. (ë§í¬, URL, ë·°, í…œí”Œë¦¿ ë§Œë“¤ê¸°)</p>
      </li>
    </ol>
  </li>
</ul>

<h3 id="í¼ê³¼-í˜ì´ì§€-ë§í¬">í¼ê³¼ í˜ì´ì§€ ë§í¬</h3>

<p><code class="language-plaintext highlighter-rouge">blog/templates/blog/base.html</code>ì—ì„œ classê°€ <code class="language-plaintext highlighter-rouge">page-header</code>ì¸ <code class="language-plaintext highlighter-rouge">div</code>ì— ë§í¬ë¥¼ ì¶”ê°€</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"{% url 'post_new' %}"</span> <span class="na">class=</span><span class="s">"top-menu"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"glyphicon glyphicon-plus"</span><span class="nt">&gt;&lt;/span&gt;</span>
<span class="nt">&lt;/a&gt;</span>
</code></pre></div></div>

<p>ìƒˆë¡œìš´ ë·° <code class="language-plaintext highlighter-rouge">post_vew</code>ì´ê³  ë¶€íŠ¸ìŠ¤íŠ¸ë© í…Œë§ˆì— ìˆëŠ” <code class="language-plaintext highlighter-rouge">glyphicon glyphicon-plus</code>í´ë˜ìŠ¤ë¡œ ë”í•˜ê¸° ê¸°í˜¸ê°€ ë³´ì´ê²Œ ëœë‹¤.</p>

<ul>
  <li>ì´ ìƒíƒœë¡œ ì‹¤í–‰í•˜ë©´ <code class="language-plaintext highlighter-rouge">NoReverseMatch</code>ì—ëŸ¬ ë°œìƒ</li>
</ul>

<h3 id="url">URL</h3>

<p><code class="language-plaintext highlighter-rouge">blog/urls.py</code>ì— ì½”ë“œ ì¶”ê°€</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.urls</span> <span class="kn">import</span> <span class="n">path</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">views</span>

<span class="n">urlpatterns</span> <span class="o">=</span> <span class="p">[</span>
    <span class="n">path</span><span class="p">(</span><span class="s">''</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">post_list</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'post_list'</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s">'post/&lt;int:pk&gt;/'</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">post_detail</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'post_detail'</span><span class="p">),</span>
    <span class="n">path</span><span class="p">(</span><span class="s">'post/new/'</span><span class="p">,</span> <span class="n">views</span><span class="p">.</span><span class="n">post_new</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s">'post_new'</span><span class="p">),</span>
<span class="p">]</span>
</code></pre></div></div>

<ul>
  <li>ì‚¬ì´íŠ¸ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ë©´ <code class="language-plaintext highlighter-rouge">AttributeError</code>ê°€ ë°œìƒí•˜ëŠ”ë° <code class="language-plaintext highlighter-rouge">post_new</code> ë·°ë¥¼ êµ¬í˜„í•˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì— ë°œìƒí•œë‹¤.</li>
</ul>

<h3 id="post_new-view"><code class="language-plaintext highlighter-rouge">post_new</code> view</h3>

<p><code class="language-plaintext highlighter-rouge">blog/views.py</code>ì—ì„œ from ì¤„ ì•„ë˜ ì½”ë“œ ì¶”ê°€</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from django.shortcuts import render, get_object_or_404
from django.utils import timezone
from .models import Post
from .forms import PostForm

def post_list(request):
    posts = Post.objects.filter(published_date__lte=timezone.now()).order_by('published_date')
    return render(request, 'blog/post_list.html', {'posts':posts})

def post_detail(request, pk):
    post = get_object_or_404(Post, pk=pk)
    return render(request, 'blog/post_detail.html', {'post': post})

def post_new(request):
    form = PostForm()
    return render(request, 'blog/post_edit.html', {'form': form})
</code></pre></div></div>

<h3 id="í…œí”Œë¦¿">í…œí”Œë¦¿</h3>

<p><code class="language-plaintext highlighter-rouge">blog/templates/blog/post_edit.html</code>íŒŒì¼ì„ ìƒì„±í•´ í¼ì´ ì‘ë™í•  ìˆ˜ ìˆê²Œ ë§Œë“ ë‹¤.</p>

<ul>
  <li>
    <p>ë¨¸ì € í¼ì´ ë³´ì—¬ì•¼ í•©ë‹ˆë‹¤. <code class="language-plaintext highlighter-rouge">{{ form.as_p }}</code></p>
  </li>
  <li>
    <p>ìœ„ ì½”ë“œë¥¼ HTML <code class="language-plaintext highlighter-rouge">form</code> íƒœê·¸ë¡œ ê°ì‹¼ë‹¤. <code class="language-plaintext highlighter-rouge">&lt;form method="POST"&gt;...&lt;/form&gt;</code></p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">Save</code>ë²„íŠ¼ - <code class="language-plaintext highlighter-rouge">&lt;button type="submit"&gt;Save&lt;/button&gt;</code></p>
  </li>
  <li>
    <p>ë§ˆì§€ë§‰ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">&lt;form ...&gt;</code>ì— <code class="language-plaintext highlighter-rouge">{% csrf_token %}</code>ì„ ì¶”ê°€í•œë‹¤. ì´ ì‘ì—…ì€ í¼ ë³´ì•ˆì„ ìœ„í•´ ì¤‘ìš”í•©ë‹ˆë‹¤! ì´ ì‘ì—…ì„ ë¹¼ë†“ê³  ì €ì¥í•˜ë©´ ì¥ê³ ëŠ” ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ë¥¼ ë°œìƒì‹œí‚¬ê±°ì—ìš” (ë¡œì»¬ì—ì„œëŠ” ë°œìƒì‹œí‚¤ì§€ ëª»í•¨â€¦)</p>

    <p>`<img src="https://tutorial.djangogirls.org/ko/django_forms/images/csrf2.png" alt="CSFR Forbidden page" /></p>
  </li>
</ul>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{% extends 'blog/base.html' %}

{% block content %}
    <span class="nt">&lt;h1&gt;</span>New post<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;form</span> <span class="na">method=</span><span class="s">'POST'</span> <span class="na">class=</span><span class="s">'post-form'</span><span class="nt">&gt;</span>{% csrf_token %}
        {{ form.as_p}}
        <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">'submit'</span> <span class="na">class=</span><span class="s">'save btn btn-default'</span><span class="nt">&gt;</span>Save<span class="nt">&lt;/button&gt;</span>
    <span class="nt">&lt;/form&gt;</span>
{% endblock %}
</code></pre></div></div>

<ul>
  <li>ì—¬ê¸°ì„œ í™”ë©´ì„ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¬ ê²½ìš° í™”ë©´ì€ ë‚˜ì˜¤ì§€ë§Œ ì €ì¥í•´ë„ ìƒˆ ê¸€ì€ ì¶”ê°€ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤! - <code class="language-plaintext highlighter-rouge">view ì¶”ê°€ì‘ì—… í•„ìš”!</code></li>
</ul>

<h3 id="í¼-ì €ì¥í•˜ê¸°">í¼ ì €ì¥í•˜ê¸°</h3>

<p><code class="language-plaintext highlighter-rouge">blog/views.py</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">post_new</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">'blog/post_edit.html'</span><span class="p">,</span> <span class="p">{</span><span class="s">'form'</span><span class="p">:</span> <span class="n">form</span><span class="p">})</span>
</code></pre></div></div>

<p>í¼ì„ ì œì¶œí•  ë•Œ ê°™ì€ ë·°ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤. ì´ ë•Œ <code class="language-plaintext highlighter-rouge">request</code>ì—ëŠ” ìš°ë¦¬ê°€ ì…ë ¥í•œ ë°ì´í„°ê°€ ìˆëŠ”ë°, <code class="language-plaintext highlighter-rouge">request.POST</code>ê°€ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ( <code class="language-plaintext highlighter-rouge">POST</code>ëŠ” ê¸€ ë°ì´í„°ë¥¼ ë“±ë¡í•˜ëŠ”(posting)í•˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ë¸”ë¡œê·¸ ê¸€ì„ ì˜ë¯¸í•˜ëŠ” postì™€ëŠ” ê´€ë ¨ ì—†ìŒ) HTMLì˜ <code class="language-plaintext highlighter-rouge">&lt;form&gt;</code> íƒœê·¸ì˜ <code class="language-plaintext highlighter-rouge">method = "POST"</code>ì†ì„±ì— ë”°ë¼ POSTë¡œ ë„˜ê²¨ì§„ í¼ í•„ë“œì˜ ê°’ë“¤ì€ <code class="language-plaintext highlighter-rouge">request.POST</code>ì— ì €ì¥ë©ë‹ˆë‹¤.</p>

<p>ì´ì œ viewì—ì„œ ë‘ ìƒí™©ì„ ë‚˜ëˆ„ì–´ ì²˜ë¦¬í•´ë³¼ ê²ƒì´ë‹¤.</p>

<ol>
  <li>ì²˜ìŒ í˜ì´ì§€ì— ì ‘ì†í–ˆì„ ë•Œ: ìƒˆ ê¸€ì„ ì“¸ ìˆ˜ ìˆê²Œ í¼ì´ ë¹„ì–´ìˆì–´ì•¼í•œë‹¤.</li>
  <li>í¼ì— ì…ë ¥ëœ ë°ì´í„°ë¥¼ view í˜ì´ì§€ë¡œ ê°€ì§€ê³  ì˜¬ ë•Œ: ì¡°ê±´ë¬¸ì„ ì¶”ê°€ì‹œì¼œì•¼í•œë‹¤.(<code class="language-plaintext highlighter-rouge">if</code>)</li>
</ol>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">POST</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">form</span> <span class="o">=</span> <span class="n">PostForm</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li>ë§Œì•½ <code class="language-plaintext highlighter-rouge">method</code>ê°€ <code class="language-plaintext highlighter-rouge">POST</code>ë¼ë©´, í¼ì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ <code class="language-plaintext highlighter-rouge">PostForm</code>ìœ¼ë¡œ ë„˜ê²¨ì¤˜ì•¼í•˜ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">form = PostForm(request.POST)</code></li>
</ul>

<p>ì´ì œ í¼ì— ë“¤ì–´ìˆëŠ” ê°’ë“¤ì´ ì˜¬ë°”ë¥¸ì§€ í™•ì¸í•´ì•¼í•œë‹¤. (ëª¨ë“  í•„ë“œì—ëŠ” ê°’ì´ ìˆì–´ì•¼ í•˜ê³  ì˜ëª»ëœ ê°’ì´ ìˆë‹¤ë©´ ì €ì¥ë˜ì§€ ì•Šì•„ì•¼í•œë‹¤) - <code class="language-plaintext highlighter-rouge">form.is_valid()</code> ì‚¬ìš©</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="n">form</span><span class="p">.</span><span class="n">is_valid</span><span class="p">():</span>
    <span class="n">post</span> <span class="o">=</span> <span class="n">form</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">commit</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
    <span class="n">post</span><span class="p">.</span><span class="n">author</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">user</span>
    <span class="n">post</span><span class="p">.</span><span class="n">published_date</span> <span class="o">=</span> <span class="n">timezone</span><span class="p">.</span><span class="n">now</span><span class="p">()</span>
    <span class="n">post</span><span class="p">.</span><span class="n">save</span><span class="p">()</span>
</code></pre></div></div>

<ul>
  <li>ì—¬ê¸°ì„œì˜ ì‘ì—…ì€ ì¼ë°˜ì ìœ¼ë¡œ ë‘ ë‹¨ê³„ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤. í•˜ë‚˜ëŠ” <code class="language-plaintext highlighter-rouge">form.save()</code>ë¡œ í¼ì„ ì €ì¥í•˜ëŠ” ì‘ì—…, ë‚˜ë¨¸ì§€ í•˜ë‚˜ëŠ” ì‘ì„±ìë¥¼ ì¶”ê°€í•˜ëŠ” ì‘ì—…ì´ë‹¤. (<code class="language-plaintext highlighter-rouge">PostForm</code>ì—ëŠ” ì‘ì„±ì í•„ë“œê°€ ì—†ì§€ë§Œ, í•„ë“œ ê°’ì€ í•„ìš”í•¨!)</li>
  <li><code class="language-plaintext highlighter-rouge">commit=False</code>ë€ ë„˜ê²¨ì§„ ë°ì´í„°ë¥¼ ë°”ë¡œ <code class="language-plaintext highlighter-rouge">Post</code> ëª¨ë¸ì— ì €ì¥í•˜ì§€ëŠ” ë§ë¼ëŠ” ëœ»ì…ë‹ˆë‹¤. (ì‘ì„±ìë¥¼ ì¶”ê°€í•œ í›„ ì €ì¥í•´ì•¼í•˜ê¸° ë•Œë¬¸) ëŒ€ë¶€ë¶„ì˜ ê²½ìš°ì—ëŠ” <code class="language-plaintext highlighter-rouge">commit=False</code>ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  <code class="language-plaintext highlighter-rouge">form.save()</code>ë¥¼ ì‚¬ìš©í•´ì„œ ì €ì¥í•œë‹¤. ë‹¤ë§Œ ì—¬ê¸°ì„œëŠ” ì‘ì„±ì ì •ë³´ë¥¼ ì¶”ê°€í•˜ê³  ì €ì¥í•´ì•¼ í•˜ë¯€ë¡œ <code class="language-plaintext highlighter-rouge">commit=False</code>ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">post.save()</code>ëŠ” ë³€ê²½ì‚¬í•­(ì‘ì„±ìì •ë³´ê°€ í¬í•¨ëœ)ì„ ìœ ì§€í•  ê²ƒì´ê³  ìƒˆ ë¸”ë¡œê·¸ ê¸€ì´ ë§Œë“¤ì–´ ì§ˆê²ƒì´ë‹¤.</li>
</ul>

<p>ëìœ¼ë¡œ ìƒˆ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•œ ë‹¤ìŒì— <code class="language-plaintext highlighter-rouge">post_detail</code>í˜ì´ì§€ë¡œ ì´ë™í•˜ê¸°</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">redirect</span>
<span class="p">...</span>
			<span class="k">return</span> <span class="n">redirect</span><span class="p">(</span><span class="s">'post_detail'</span><span class="p">,</span><span class="n">pk</span><span class="o">=</span><span class="n">post</span><span class="p">.</span><span class="n">pk</span><span class="p">)</span>
</code></pre></div></div>

<ul>
  <li>ìƒˆë¡œ ì‘ì„±í•œ ê¸€ì„ ë³¼ ìˆ˜ ìˆë„ë¡ <code class="language-plaintext highlighter-rouge">post_detail</code>í˜ì´ì§€ë¡œ ê°€ë¼ê³  ìˆ˜ì •í•œë‹¤.</li>
  <li><code class="language-plaintext highlighter-rouge">post_detail</code>ì€ ì´ë™í•´ì•¼í•œ ë·° ì´ë¦„</li>
  <li><code class="language-plaintext highlighter-rouge">post_detail</code>ì—ëŠ” <code class="language-plaintext highlighter-rouge">pk</code>ê°€ í•„ìš”í•˜ê¸° ë•Œë¬¸ì— <code class="language-plaintext highlighter-rouge">pk=post.pk</code>ë¥¼ ì‚¬ìš©í•˜ì—¬ ë·°ì—ê²Œ ê°’ì„ ë„˜ê²¨ì¤€ë‹¤. ì—¬ê¸°ì„œ <code class="language-plaintext highlighter-rouge">post</code>ëŠ” ìƒˆë¡œ ìƒì„±í•œ ë¸”ë¡œê·¸ ê¸€</li>
</ul>

:ET