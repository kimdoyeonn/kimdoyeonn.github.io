I"8<p>참고: <a href="https://programmers.co.kr/learn/courses/30/lessons/67257">프로그래머스</a></p>

<h6 id="문제-설명">문제 설명</h6>

<p>IT 벤처 회사를 운영하고 있는 <code class="language-plaintext highlighter-rouge">라이언</code>은 매년 사내 해커톤 대회를 개최하여 우승자에게 상금을 지급하고 있습니다.
이번 대회에서는 우승자에게 지급되는 상금을 이전 대회와는 다르게 다음과 같은 방식으로 결정하려고 합니다.
해커톤 대회에 참가하는 모든 참가자들에게는 숫자들과 3가지의 연산문자(<code class="language-plaintext highlighter-rouge">+, -, *</code>) 만으로 이루어진 연산 수식이 전달되며, 참가자의 미션은 전달받은 수식에 포함된 연산자의 우선순위를 자유롭게 재정의하여 만들 수 있는 가장 큰 숫자를 제출하는 것입니다.
단, 연산자의 우선순위를 새로 정의할 때, 같은 순위의 연산자는 없어야 합니다. 즉, <code class="language-plaintext highlighter-rouge">+</code> &gt; <code class="language-plaintext highlighter-rouge">-</code> &gt; <code class="language-plaintext highlighter-rouge">*</code> 또는 <code class="language-plaintext highlighter-rouge">-</code> &gt; <code class="language-plaintext highlighter-rouge">*</code> &gt; <code class="language-plaintext highlighter-rouge">+</code> 등과 같이 연산자 우선순위를 정의할 수 있으나 <code class="language-plaintext highlighter-rouge">+,*</code> &gt; <code class="language-plaintext highlighter-rouge">-</code> 또는 <code class="language-plaintext highlighter-rouge">*</code> &gt; <code class="language-plaintext highlighter-rouge">+,-</code>처럼 2개 이상의 연산자가 동일한 순위를 가지도록 연산자 우선순위를 정의할 수는 없습니다. 수식에 포함된 연산자가 2개라면 정의할 수 있는 연산자 우선순위 조합은 2! = 2가지이며, 연산자가 3개라면 3! = 6가지 조합이 가능합니다.
만약 계산된 결과가 음수라면 해당 숫자의 절댓값으로 변환하여 제출하며 제출한 숫자가 가장 큰 참가자를 우승자로 선정하며, 우승자가 제출한 숫자를 우승상금으로 지급하게 됩니다.</p>

<p>예를 들어, 참가자 중 <code class="language-plaintext highlighter-rouge">네오</code>가 아래와 같은 수식을 전달받았다고 가정합니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"100-200*300-500+20"
</code></pre></div></div>

<p>일반적으로 수학 및 전산학에서 약속된 연산자 우선순위에 따르면 더하기와 빼기는 서로 동등하며 곱하기는 더하기, 빼기에 비해 우선순위가 높아 <code class="language-plaintext highlighter-rouge">*</code> &gt; <code class="language-plaintext highlighter-rouge">+,-</code> 로 우선순위가 정의되어 있습니다.
대회 규칙에 따라 <code class="language-plaintext highlighter-rouge">+</code> &gt; <code class="language-plaintext highlighter-rouge">-</code> &gt; <code class="language-plaintext highlighter-rouge">*</code> 또는 <code class="language-plaintext highlighter-rouge">-</code> &gt; <code class="language-plaintext highlighter-rouge">*</code> &gt; <code class="language-plaintext highlighter-rouge">+</code> 등과 같이 연산자 우선순위를 정의할 수 있으나 <code class="language-plaintext highlighter-rouge">+,*</code> &gt; <code class="language-plaintext highlighter-rouge">-</code> 또는 <code class="language-plaintext highlighter-rouge">*</code> &gt; <code class="language-plaintext highlighter-rouge">+,-</code> 처럼 2개 이상의 연산자가 동일한 순위를 가지도록 연산자 우선순위를 정의할 수는 없습니다.
수식에 연산자가 3개 주어졌으므로 가능한 연산자 우선순위 조합은 3! = 6가지이며, 그 중 <code class="language-plaintext highlighter-rouge">+</code> &gt; <code class="language-plaintext highlighter-rouge">-</code> &gt; <code class="language-plaintext highlighter-rouge">*</code> 로 연산자 우선순위를 정한다면 결괏값은 22,000원이 됩니다.
반면에 <code class="language-plaintext highlighter-rouge">*</code> &gt; <code class="language-plaintext highlighter-rouge">+</code> &gt; <code class="language-plaintext highlighter-rouge">-</code> 로 연산자 우선순위를 정한다면 수식의 결괏값은 -60,420 이지만, 규칙에 따라 우승 시 상금은 절댓값인 60,420원이 됩니다.</p>

<p>참가자에게 주어진 연산 수식이 담긴 문자열 expression이 매개변수로 주어질 때, 우승 시 받을 수 있는 가장 큰 상금 금액을 return 하도록 solution 함수를 완성해주세요.</p>

<h5 id="제한사항"><strong>[제한사항]</strong></h5>

<ul>
  <li>
    <p>expression은 길이가 3 이상 100 이하인 문자열입니다.</p>
  </li>
  <li>
    <p>expression은 공백문자, 괄호문자 없이 오로지 숫자와 3가지의 연산자(</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>+, -, *
</code></pre></div>    </div>

    <p>) 만으로 이루어진 올바른 중위표기법(연산의 두 대상 사이에 연산기호를 사용하는 방식)으로 표현된 연산식입니다. 잘못된 연산식은 입력으로 주어지지 않습니다.</p>

    <ul>
      <li>즉, <code class="language-plaintext highlighter-rouge">"402+-561*"</code>처럼 잘못된 수식은 올바른 중위표기법이 아니므로 주어지지 않습니다.</li>
    </ul>
  </li>
  <li>
    <p>expression의 피연산자(operand)는 0 이상 999 이하의 숫자입니다.</p>

    <ul>
      <li>즉, <code class="language-plaintext highlighter-rouge">"100-2145*458+12"</code>처럼 999를 초과하는 피연산자가 포함된 수식은 입력으로 주어지지 않습니다.</li>
      <li><code class="language-plaintext highlighter-rouge">"-56+100"</code>처럼 피연산자가 음수인 수식도 입력으로 주어지지 않습니다.</li>
    </ul>
  </li>
  <li>
    <p>expression은 적어도 1개 이상의 연산자를 포함하고 있습니다.</p>
  </li>
  <li>
    <p>연산자 우선순위를 어떻게 적용하더라도, expression의 중간 계산값과 최종 결괏값은 절댓값이 263 - 1 이하가 되도록 입력이 주어집니다.</p>
  </li>
  <li>
    <p>같은 연산자끼리는 앞에 있는 것의 우선순위가 더 높습니다.</p>
  </li>
</ul>

<hr />

<h5 id="입출력-예"><strong>입출력 예</strong></h5>

<table>
  <thead>
    <tr>
      <th>expression</th>
      <th>result</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">"100-200*300-500+20"</code></td>
      <td>60420</td>
    </tr>
    <tr>
      <td><code class="language-plaintext highlighter-rouge">"50*6-3*2"</code></td>
      <td>300</td>
    </tr>
  </tbody>
</table>

<h3 id="내-풀이">내 풀이</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">deque</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">permutations</span>
<span class="kn">from</span> <span class="nn">copy</span> <span class="kn">import</span> <span class="n">deepcopy</span>
<span class="k">def</span> <span class="nf">solution</span><span class="p">(</span><span class="n">expression</span><span class="p">):</span>
    <span class="n">answer</span> <span class="o">=</span> <span class="mi">0</span>
    
    <span class="c1"># 숫자와 연산자를 나눠서 express_list에 넣어준다
</span>    <span class="n">express_list</span> <span class="o">=</span> <span class="n">deque</span><span class="p">()</span>
    <span class="n">num</span> <span class="o">=</span> <span class="s">''</span>
    <span class="k">for</span> <span class="n">ex</span> <span class="ow">in</span> <span class="n">expression</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">ex</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'+'</span><span class="p">,</span><span class="s">'-'</span><span class="p">,</span><span class="s">'*'</span><span class="p">]:</span>
            <span class="n">num</span> <span class="o">+=</span> <span class="n">ex</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">express_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
            <span class="n">num</span> <span class="o">=</span> <span class="s">''</span>
            <span class="n">express_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">ex</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">express_list</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    
    <span class="c1"># 연산자의 우선순위에 때라 나올 수 있는 순열을 구한다
</span>    <span class="n">orders</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">permutations</span><span class="p">([</span><span class="s">'+'</span><span class="p">,</span><span class="s">'-'</span><span class="p">,</span><span class="s">'*'</span><span class="p">]))</span>
    
    <span class="c1"># 위에서 구한 우선순위들에 따라 모든 값을 계산해본다
</span>    <span class="n">price</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">order</span> <span class="ow">in</span> <span class="n">orders</span><span class="p">:</span>
        <span class="n">temp</span> <span class="o">=</span> <span class="n">deepcopy</span><span class="p">(</span><span class="n">express_list</span><span class="p">)</span>
        <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">popleft</span><span class="p">())</span>	<span class="c1"># 1
</span>        <span class="k">for</span> <span class="n">o</span> <span class="ow">in</span> <span class="n">order</span><span class="p">:</span>
            <span class="k">while</span> <span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s">'*'</span><span class="p">,</span><span class="s">'-'</span><span class="p">,</span><span class="s">'+'</span><span class="p">]:</span>	<span class="c1"># 2
</span>                <span class="k">if</span> <span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">o</span><span class="p">:</span>
                    <span class="n">temp</span><span class="p">.</span><span class="n">popleft</span><span class="p">()</span>
                    <span class="n">temp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="n">o</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">popleft</span><span class="p">()))</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">popleft</span><span class="p">())</span>
                    <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">popleft</span><span class="p">())</span> 
            <span class="k">else</span><span class="p">:</span>
                <span class="n">temp</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">temp</span><span class="p">.</span><span class="n">popleft</span><span class="p">())</span>
        <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">answer</span><span class="p">:</span>	<span class="c1"># 3
</span>            <span class="n">answer</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">temp</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">answer</span>
</code></pre></div></div>

<ol>
  <li>
    <p>인덱스 0에는 연산자만 들어있고 숫자를 temp[1]과 temp[-1]에 있게 만들기 위해 제일 앞의 숫자를 pop해서 뒤에 append해주었다. 이렇게 하면 인덱스 0에 숫자가 들어가면 연산이 끝났음을 알 수 있음</p>
  </li>
  <li>
    <p>연산 순서에 맞는 모든 연산을 수행한다. 순서에 맞는 연산자를 만나면 연산자를 pop한다. 그러면 연산을 할 숫자를 맨 앞과 맨 뒤에 존재하게 되므로, 맨 뒤 숫자와 맨 앞 숫자를 연산하여 -1에 넣어준다.</p>

    <p>만약 순서에 맞지 않은 연산자일 경우에는 연산자와 숫자를 pop해서 맨뒤에 append 해준다.</p>

    <p>while이 다 끝나면 다음 연산에서 0에 연산자가 들어갈 수 있게 다시한번 pop과 append함</p>

    <p>연산이 다 끝나면 temp는 temp[0]에는 연산의 결과값이 들어있는 길이 1의 리스트가 된다.</p>
  </li>
  <li>
    <p>answer와 temp[0]을 비교해서 answer에 항상 최댓값만 들어갈 수 있게 해준다.</p>
  </li>
</ol>
:ET