---
title: 자바스크립트 메모리 참조와 가비지 컬랙터(Garbage Collector)
date: 2021-11-26 23:34:33
categories:
tags:
---

## 자바스크립트에서 메모리 참조

### 변수 생성과 값 할당

```jsx
let a = 100
```

자바스크립트에서 변수를 생성하고 값을 할당할 때 위와 같이 문을 작성한다.

키워드 let으로 a 변수를 생성하고 거기에 100을 담는다 라는 의미이다. 이 과정을 자바스크립트의 동작 기준으로 나누면 다음과 같다.

```jsx
let a
a = 100
```

자바스크립트에서는 변수의 생성과 값의 할당이 동시에 일어나지 않는다. 한번에 작성하더라도 따로 일어나고, 저장되는 메모리도 다르다.

변수 할당이 일어나면 변수는 stack에 저장된다. 이 때 변수는 아무 값도 참조하고 있지 않기 때문에 `undefined`를 가지게 된다.

그리고 값 할당이 일어나면 값은 heap에 어딘가에 저장된다. 그리고 heap이 저장된 메모리 주소가 stack의 변수의 값으로 저장된다. 따라서 **자바스크립트에서 변수는 값을 직접 가지고 있는 것이 아니라 값이 저장된 메모리 주소를 참조하고 있다고 할 수 있다**.

### 값 재할당

변수를 다루다 보면 재할당이 일어나는 것은 매우 흔한 일이다. 그럴 땐 아래와 같이 작성한다.

```jsx
a = 200
```

그러면 자바스크립트는 heap의 어딘가의 공간에 200을 저장한 후에 이미 저장되어 있는 변수 a가 참조하고 있는 주소를 200이 저장된 주소로 바꾼다.

**더이상 아무 변수도 참조하고 있지 않은 100은 가비지 컬렉터의 수거 대상이 되어 적절한 시점에 제거된다.**

## 가비지 컬렉터(Garbage Collector, GC)

가비지 컬렉터는 **프로그램이 더이상 사용하지 않는 메모리를 자동으로 정리하는 기능**을 말한다. 이 기능을 가진 언어는 Java, C#, V8엔진 등이 있다.

가비지 컬렉터는 작동하는 시점이 정해져 있지 않고 조절할 수도 없다. 일단 작동하면 프로그램이 멈추고 작동이 끝날 때까지를 기다려야 한다. 작동을 막을 수 없기 때문에 개발자 입장에서 할 수 있는 최선은 메모리를 효율적으로 사용하여 가비지컬렉션 작업 시간을 최소한으로 줄이는 것이다.
