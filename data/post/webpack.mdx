# webpack을 왜 써야하나?

웹팩을 왜 사용해야하나 이해하기 위해 번들러가 등장하기 이전에 웹에서 자바스크립트를 어떻게 사용했는지를 요약해보겠습니다.

브라우저에서 자바스크립트를 실행하는 방법에는 두 가지가 있습니다.
첫번째, 각 기능에 스크립트를 포함시키는 방법: 이 방법은 너무 많은 스크립트를 로드하면 네트워크 병목 현상이 발생할 수 있으므로 확장하기가 어렵습니다.
두번째, 모든 프로젝트 코드가 포함된 큰 .js파일을 사용하는 방법: 이 방법은 스코프, 크기, 가독성, 유지보수성에서 문제를 발생시킬 수 있습니다.

# IIFEs: Immediately invoked function expressions

IIFE는 큰 프로젝트에서의 스코프 이슈를 해결합니다; 스크립트 파일이 IIFE로 싸여있을 때 스코프 충돌 걱정 없이 파일을 안전하게 연결하거나 안전하게 합칠 수 있습니다.

IIFE의 사용으로 Make, Gulp, Grunt, Broccoli, Brunch와 같은 도구가 탄생했습니다. 이러한 도구는 task runner로 알려졌으며 모든 프로젝트 파일을 연결합니다.

그러나 파일 하나를 변경하면 전체 파일을 다시 빌드해야 합니다. 파일을 연결하면 여러 파일에서 스크립트를 재사용하기가 더 쉬워지지만 빌드 최적화는 더 어려워 집니다. 코드를 실제로 사용하는지 사용하지 않는지 어떻게 알 수 있을까요?

lodash의 함수 하나만 사용하더라도 전체 라이브러리를 추가한 다음에 쪼개야 합니다. 코드의 종속성을 어떻게 트리셰이크할 수 있을까요? 코드 덩어리를 지연로딩하는 것은 대규모로 수행하기 어려울 수 있으며 개발자의 많은 수작업을 필요로 합니다.

# Node.js 덕분에 탄생한 자바스크립트 모듈

Webpack은 브라우저 환경 외부의 컴퓨터와 서버에서 사용할 수 있는 JavaScript 런타임인 Node.js에서 실행됩니다.

Node.js가 릴리즈됬을 때 새로운 시대가 시작됐고 그것은 새로운 도전을 가져왔습니다. 이제 JavaScript가 브라우저에서 실행되지 않는다면 어떻게 Node 어플리케이션은 새로운 코드 덩어리를 로드해야할까요? 추가할 수 있는 html 파일도 script 태그도 없이요

CommonJS가 출시되면서 현재 파일에 모듈을 로드하여 사용할 수 있는 require이 도입되었습니다. 이를 통해 각 모듈을 필요한 만큼만 가져와서 스코프 이슈를 즉시 해결했습니다.

# npm + Node.js + modules - 대량 배포

JavaScript는 언어로서, 플랫폼으로서, 빠른 애플리케이션을 빠르게 개발하고 제작하는 방법으로 전세계를 장악하고 있습니다.

하지만 CommonJS는 브라우저를 지원하지 않습니다. live binding도 없습니다. 순환 참조의 문제가 있고, 동기적 오듈 해결과 로딩은 느립니다. CommonJS는 Node.js 프로젝트에 대한 훌륭한 솔루션이었지만 브라우저는 모듈을 지원하지 않았기 때문에 Browserify, RequireJS, SystemJS와 같은 번들러와 도구가 만들어졌습니다. 이를 통해 브라우저에서 실행되는 CommonJS모듈을 작성할 수 있었습니다.

# ESM - ECMAScript 모듈

웹 프로젝트에 대한 좋은 소식은 모듈이 ECMAScript 표준의 공식 기능으로 지정하고 있다는 것입니다.
그러나 브라우저 지원이 불완전하며 번들링은 여전히 모듈 구현에 비해 빠르기에 번들링이 권장되고 있습니다.

# 자동 종속성 수집

옛날 방식의 Task Runner와 심지어는 Google Closure Complier도 모든 종속성을 수동으로 미리 선언해야 합니다.
반면 웹팩 같은 번들러는 가져오고 내보낸 내용을 기반으로 종속성 그래프를 자동으로 작성하고 추론합니다. 이는 다른 플러그인 및 로더와 함께 훌륭한 개발자 경험을 제공합니다.

모듈을 작성할 수 있을 뿐만 아니라 모든 모듈 형식을 지원하고 리소스와 에셋을 동시에 처리할 수 있는 무언가가 있으면 좋지 않을까요?

이것이 웹팩이 존재하는 이유입니다. 웹팩은 자바스크립트 애플리케이션을 번들로 묶을 수 있는 도구(ESM과 CommonJS 모두 지원)로 이미지, 글꼴, 스타일시트 등 다양한 에셋을 지원하도록 확장할 수 있습니다.

웹팩은 성능과 로드 시간을 중요하게 생각하며, 프로젝트와 사용자에게 최상의 경험을 지원하기 위해 비동기 청크 로딩 및 프리페칭과 같은 새로운 기능을 항상 개선하거나 추가하고 있습니다.